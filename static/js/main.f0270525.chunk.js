(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports={gallery:"Show_gallery__qu3hA"}},155:function(e,t,n){e.exports=n(333)},160:function(e,t,n){},161:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},162:function(e,t,n){},248:function(e,t){},250:function(e,t){},283:function(e,t){},284:function(e,t){},330:function(e,t){},331:function(e,t){},332:function(e,t){},333:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(147),c=n.n(r),i=(n(160),n(148)),s=n(149),u=n(153),l=n(150),d=n(154),m=(n(161),n(162),n(23)),p=n(28),f=n(6),g=n(7),b=n.n(g),v=(n(96),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)(function(){n.current=e},[e]),Object(a.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}),E=n(8),h=n.n(E),R=n(16),A=n(151),j=n.n(A),O=void 0,P={width:1080,height:1080,facingMode:"environment"},y=function(e){var t=e.onRef,n=Object(a.useRef)(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],s=c[1],u=function(){var e=Object(R.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=4;break}throw t="Browser API navigator.mediaDevices.getUserMedia not available",O.setState({error_messages:t}),t;case 4:n.current.video.onloadedmetadata=function(){s(!0)};case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){u()},[n]),i&&t&&t(n),o.a.createElement(j.a,{audio:!1,ref:n,screenshotFormat:"image/jpeg",videoConstraints:P,height:400,width:400})},S=(n(152),y),_=n(67),w=n.n(_),D={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).authDomain,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).databaseURL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).projectId,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"}).messagingSenderId},T={};Object.keys(D).map(function(e){T[e]=Object({NODE_ENV:"production",PUBLIC_URL:"/ricecam",REACT_APP_apiKey:"AIzaSyDSwRNP14oYjsb4rJvDjYbANatbaIBDI0A",REACT_APP_authDomain:"operation-verde-ricecam.firebaseapp.com",REACT_APP_databaseURL:"https://operation-verde-ricecam.firebaseio.com",REACT_APP_projectId:"operation-verde-ricecam",REACT_APP_storageBucket:"operation-verde-ricecam.appspot.com",REACT_APP_messagingSenderId:"231640672051"})["REACT_APP_".concat(e)]}),w.a.apps.length||(w.a.initializeApp(T),console.log("DATABASE CONNECTED."));var C=w.a;b.a.locale("ja");var I=function(e,t){var n=b()().format("YYYY-MM-DDTHH:mm:ss:SSS"),a=b()().format("YYYY-MM-DD");C.firestore().collection("logs").doc(a).collection("logs").doc(n).set({message:e},{merge:!0}).then(function(e){t&&t(e)}).catch(function(e){return console.log("LOGGING ERROR: ",e)})},Y=function(){var e=Object(R.a)(h.a.mark(function e(t){var n,a,o,r,c,i,s,u,l,d,p,f,g;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,t){var a={};for(var o in e)switch(typeof e[o]){case"function":t&&(a[o]="function: ".concat(e[o]));break;case"object":a[o]=n(e[o],t);break;case"number":a[o]=e[o];break;default:a[o]=e[o]}return a},a=b()().format("YYYY-MM-DDTHH:mm:ss:SSS"),o=b()().format("YYYY-MM-DD"),!("storage"in navigator&&"estimate"in navigator.storage)){e.next=10;break}return e.next=6,navigator.storage.estimate();case 6:c=e.sent,r={usage:c.usage,quota:c.quota,percent:"".concat((100*c.usage/c.quota).toFixed(0)," used")},e.next=11;break;case 10:r="browser does not have storage API";case 11:if(i=window.performance.memory||{},s="".concat(navigator.deviceMemory," GB")||!1,u=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection,l=u?u.effectiveType:"browser does not have connection API",!("getBattery"in navigator)){e.next=19;break}return e.next=18,navigator.getBattery();case 18:d=e.sent;case 19:p=d?d.level:"browser does not have battery API",f=n(window.performance,!1),g={storage:r,ram:s,network:l,battery:p,performance:f,browserMemory:Object(m.a)({},n(i,!1),{usage:"".concat(i.totalJSHeapSize/i.jsHeapSizeLimit*100," percent"),comment:"units in bytes. percent is percent of allocated browser memory (multiple tabs included)"})},C.firestore().collection("logs").doc(o).collection("browser performance logs").doc(a).set({status:g},{merge:!0}).then(function(e){t&&t(e)}).catch(function(e){return console.log("LOGGING ERROR: ",e)});case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(R.a)(h.a.mark(function e(t){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?b()(t).format("YYYY-MM-DD"):b()().format("YYYY-MM-DD"),console.log("grabbing videos from: ",n),e.next=4,C.firestore().collection("videoURL").doc(n).collection("urls").get().then(function(){var e=Object(R.a)(h.a.mark(function e(t){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.forEach(function(){var e=Object(R.a)(h.a.mark(function e(t){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data().url,n.push(C.storage().ref(a).getDownloadURL());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",Promise.all(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=["video/webm;codecs=vp9","video/webm;codecs=vp8","video/mp4","video/H264","video/quicktime"],M=function(e){var t,n=e.videoRef,r=e.triggerRecording,c=e.duration,i=e.onComplete,s=e.showPreview;MediaRecorder.isTypeSupported("video/webm;codecs=vp9")?t={mimeType:"video/webm; codecs=vp9",ext:".webm"}:MediaRecorder.isTypeSupported("video/webm;codecs=vp8")?t={mimeType:"video/webm; codecs=vp8",ext:".webm"}:MediaRecorder.isTypeSupported("video/mp4")?t={mimeType:"video/mp4",ext:".mp4"}:MediaRecorder.isTypeSupported("video/H264")?t={mimeType:"video/H264",ext:".mp4"}:MediaRecorder.isTypeSupported("video/quicktime")&&(t={mimeType:"video/quicktime",ext:".mov"});var u=Object(m.a)({},t,{tag:"video",gUM:{video:!0,audio:!0}}),l=Object(a.useState)(""),d=Object(f.a)(l,2),g=d[0],b=d[1],v=Object(a.useState)(5e3),E=Object(f.a)(v,2),h=E[0],R=E[1];Object(a.useEffect)(function(){c&&"number"===typeof c&&R(c)},[c]);var A=Object(a.useState)(!1),j=Object(f.a)(A,2),O=j[0],P=(j[1],Object(a.useState)([])),y=Object(f.a)(P,2),S=(y[0],y[1],Object(a.useState)([])),_=Object(f.a)(S,2),w=_[0],D=_[1];Object(a.useRef)();Object(a.useEffect)(function(){!0===r&&!1===O&&(I("VideoRecorder: START starting one recording"),C({duration:h}))},[r,O]),Object(a.useEffect)(function(){w.length>0&&(console.log("making link!",w),s&&T())},[w]);var T=function(){console.log("making blob of type",u.mimeType);var e=new Blob(w,{type:u.mimeType}),t=URL.createObjectURL(e),n=o.a.createElement("li",{key:t},o.a.createElement("video",{height:200,controls:!0,src:t}),o.a.createElement("br",null),o.a.createElement("a",{href:t,download:"video".concat(u.ext)},"download ".concat("video".concat(u.ext))));b([].concat(Object(p.a)(g),[n]))},C=function(e){if(e.duration,n){var t,a=n.current.stream;a.active||console.log("media stream is not active.",a);try{t=new MediaRecorder(a,{mimeType:u.mimeType})}catch(o){t=new MediaRecorder(a)}t.ondataavailable=function(e){D([e.data]),i&&i(e.data,u.ext)},t.onstart=function(e){D([]),setTimeout(function(){t.stop()},h)},t.start()}};return o.a.createElement("ul",{style:{display:"flex",listStyleType:"none",width:"100%",overflowX:"scroll"}},g)},B=n(68),U=function(){var e=Object(R.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a("assets/model/brightness-predictor.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(R.a)(h.a.mark(function e(t){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,B.c(function(){var e=[Array.from(t)],a=B.b(e,[e.length,432]);console.log(a);var o=n.predict(a);return o.print(),o.arraySync()[0][0]});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(R.a)(h.a.mark(function e(t){var n,a,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getContext("2d").getImageData(0,0,t.width,t.height),console.log(n),a=n.data,e.next=5,N(a);case 5:return o=e.sent,console.log(o),e.abrupt("return",o>.6);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=e.videoRef,n=e.isDetecting,o=e.delay,r=e.onDetect,c=Object(a.useState)(500),i=Object(f.a)(c,2),s=i[0],u=i[1];Object(a.useEffect)(function(){o&&"number"===typeof o&&u(o)},[o]),v(function(){l()},n?s:null);var l=function(){var e=Object(R.a)(h.a.mark(function e(){var n,a,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return n=t.current.video,(a=document.createElement("canvas")).width=12,a.height=9,a.getContext("2d").drawImage(n,0,0,a.width,a.height),e.next=9,L(a);case 9:o=e.sent,r&&r({bright:o});case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return null};b.a.locale("ja");var J=function(e){var t=e.videoRef,n=e.streamDelay,a=e.isStreaming;v(function(){r()},a?n:null);var r=function(){if(t){var e=t.current.video,n=document.createElement("canvas");n.width=1*e.videoWidth,n.height=1*e.videoHeight,n.getContext("2d").drawImage(e,0,0,n.width,n.height);n.toDataURL();n.toBlob(function(e){console.log(e),function(e){var t=b()().format("YYYY-MM-DDTHH:mm:ss:SSS"),n=b()().format("YYYY-MM-DD");console.log("pushing Image blob: ",e),C.storage().ref("".concat("images","/").concat(t,".png")).put(e).then(function(e){console.log("image blob pushed to: ".concat(e.ref.location.path),e);var t=e.ref.location.path;C.firestore().collection("imageURL").doc(n).collection("urls").doc().set({url:t})}).catch(function(e){var t="pushImageDataToStorage: ERROR ".concat(JSON.stringify(e));console.log(t),I(t)})}(e)})}};return o.a.createElement("p",null," DEBUG: photo streaming: ","".concat(a))},G=function(e,t){if(console.log(e,t),!e||!t)return!1;var n=b()(),a=e.slice(0,2),o=e.slice(2),r=b()().hour(a).minute(o),c=t.slice(0,2),i=t.slice(2),s=b()().hour(c).minute(i),u=n.isAfter(r),l=n.isBefore(s);return u&&l},z=function(e){var t=e.toggleRefresh,n=Object(a.useState)([]),r=Object(f.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)(function(){k().then(function(e){i(e)})},[t]);var s=c.map(function(e){return decodeURIComponent(e.split("/videos%2F")[1].split("?alt")[0])});return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"current list of videos today (",c.length,"): "),o.a.createElement("ol",{style:{whiteSpace:"nowrap",fontSize:"0.5rem",height:300,overflow:"scroll"}},c.map(function(e,t){return o.a.createElement("li",{key:t,style:{margin:"5px 0",textAlign:"left"}},o.a.createElement("a",{href:e},s[t]))})))},q=function(e){var t=e.showPreviews,n=void 0!==t&&t,r=Object(a.useState)(),c=Object(f.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)([]),l=Object(f.a)(u,2),d=l[0],g=l[1],E=Object(a.useState)(!0),h=Object(f.a)(E,2),R=h[0],A=h[1],j=function(e){g(function(t){return[].concat(Object(p.a)(t.slice(-4)),[e])}),console.log("LOGGER message: ",e),I(e,function(e){return console.log("LOGGER: completed. ",e)})};v(function(){console.log("logging browser performance"),Y()},6e4);var O=Object(a.useState)(!1),P=Object(f.a)(O,2),y=P[0],_=P[1],w=Object(a.useState)(!1),D=Object(f.a)(w,2),T=D[0],k=D[1],B=Object(a.useState)(5e3),U=Object(f.a)(B,2),N=U[0],L=U[1],q=Object(a.useState)({start:null,end:null}),V=Object(f.a)(q,2),K=V[0],W=V[1],F=Object(a.useState)(!1),X=Object(f.a)(F,2),$=X[0],Q=X[1],Z=Object(a.useState)(""),ee=Object(f.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(5),oe=Object(f.a)(ae,2),re=oe[0],ce=oe[1];v(function(){var e=b()().format("YYYY-MM-DDTHH:mm:ss:SSS");!T&&G(K.start,K.end)?(j("recording video at ".concat(e)),console.log("within timer?? ",G(K.start,K.end)),k(!0)):j("recording still underway, not setting recording to true")},$?6e4*re:null);var ie=Object(a.useState)({}),se=Object(f.a)(ie,2),ue=se[0],le=se[1];Object(a.useEffect)(function(){var e;i&&(console.log("listening to DB!"),e=le,C.firestore().collection("appState").doc("commands").onSnapshot(function(t){return e&&e(t.data()),t.data()}))},[i]);var de=function(e){e?(j("setting continuous recording to ".concat(ue.setContinuousRecording)),ge(function(e){return Object(m.a)({},e,{isContinuouslyRecording:!0,isRecording:!0})}),k(!0),Q(!0)):(j("setting continuous recording to ".concat(ue.setContinuousRecording)),ge(function(e){return Object(m.a)({},e,{isContinuouslyRecording:!1,isRecording:!1})}),k(!1),Q(!1))};Object(a.useEffect)(function(){var e,t,n;ue&&(j("commands received: ".concat(JSON.stringify(ue))),K.start===ue.timerStart&&K.end===ue.timerEnd||(n={start:ue.timerStart,end:ue.timerEnd},j("setting timers to ".concat(JSON.stringify(n))),n.start&&n.end&&(ge(function(e){return Object(m.a)({},e,{isTimerSet:!0})}),W(n))),$!==ue.setContinuousRecording&&de(ue.setContinuousRecording),N!==ue.videoDurationSec&&(t=ue.videoDurationSec,j("setting recording duration to ".concat(ue.videoDurationSec," secs")),L(t)),re!==ue.videoRecordFreqMin&&(e=ue.videoRecordFreqMin,j("setting recording interval to ".concat(ue.videoRecordFreqMin," mins")),ce(e)))},[ue]);var me=Object(a.useState)({isContinuouslyRecording:null,isRecording:null,isTimerSet:null,nextRecordingTime:null}),pe=Object(f.a)(me,2),fe=pe[0],ge=pe[1];Object(a.useEffect)(function(){var e;e=fe,C.firestore().collection("appState").doc("currentState").set(e,{merge:!0}).then(function(e){return console.log("REMOTE STATE UPDATER: complete. ",e)}).catch(function(e){return console.log("REMOTE DB STATE UPDATE ERROR: ",e)})},[fe]);var be=Object(a.useState)(100),ve=Object(f.a)(be,2),Ee=ve[0],he=(ve[1],Object(a.useState)(!1)),Re=Object(f.a)(he,2),Ae=Re[0],je=Re[1];Object(a.useEffect)(function(){ue&&Ae!==ue.debugStreamImages&&(ue.debugStreamImages?(j("DEBUG: streaming images to database!"),je(!0)):(j("DEBUG: stopping image stream!"),je(!1)))},[ue]);var Oe=Object(a.useState)(!1),Pe=Object(f.a)(Oe,2),ye=Pe[0],Se=Pe[1];Object(a.useEffect)(function(){if(i){var e=i.current.video;e.height=.1*e.videoHeight,e.width=.1*e.videoWidth,console.log(i.current.video)}},[i]);var _e=Object(a.useState)(!1),we=Object(f.a)(_e,2),De=we[0],Te=we[1],Ce=ue.videoDurationSec/1e3;return o.a.createElement("div",{style:{backgroundColor:R?"white":"#282c34",width:"100%",overflowX:"hidden"}},o.a.createElement(S,{onRef:s}),o.a.createElement("br",null),te?o.a.createElement("div",{style:{textAlign:"left",padding:"0 10px"}},o.a.createElement("small",null,"select ",o.a.createElement("strong",{style:{color:"gray"}},"'record 1 video'")," ","to test that the camera is recording properly. If it does, your new video should show up on the 'current list of videos today' section.",o.a.createElement("br",null),o.a.createElement("br",null),"When you are ready, press the ",o.a.createElement("strong",null,"'record indefinitely'")," ","button.")):o.a.createElement("h3",null,"please select a camera"),o.a.createElement("br",null),T&&o.a.createElement("h3",{style:{color:"red"}},"recording..."),o.a.createElement("code",null,"recording options: "),o.a.createElement("br",null),o.a.createElement("button",{style:{color:T&&"red",padding:"5px 10px",fontWeight:"bold"},onClick:function(e){j("recording video once"),ge(function(e){return Object(m.a)({},e,{isRecording:!0})}),k(!0)},disabled:!te},"record 1 video ",!!Ce&&"(".concat(Ce," sec)")),o.a.createElement("button",{onClick:de,style:{color:$&&"red",padding:"5px 10px",fontWeight:"bold"},disabled:!te},"record indefinitely"),o.a.createElement("select",{onChange:function(e){console.log(e.target.value+" selected"),ne(e.target.value)},style:{padding:"5px 10px",fontWeight:"bold",color:te?"black":"red"}},o.a.createElement("option",{style:{color:"red"},value:""},"PLEASE SELECT CAMERA"),o.a.createElement("option",{value:"CAM 01"},"CAM 01"),o.a.createElement("option",{value:"CAM 02"},"CAM 02")),o.a.createElement("br",null),o.a.createElement(z,{toggleRefresh:ye}),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){return Te(function(e){return!e})},style:{padding:"5px 10px",marginBottom:30}},"Toggle Show Debug"),De?o.a.createElement("div",null,o.a.createElement("code",null,"debug buttons: "),o.a.createElement("br",null),o.a.createElement("button",{style:{color:Ae?"red":"orange"},onClick:function(){Ae?(j("image streaming stopped!"),je(!1)):(j("streaming images to database!"),je(!0))}},"DEBUG: toggle stream to database"),o.a.createElement("button",{onClick:function(){_(!y)}},"toggle brightness detection"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("code",null,"debug logging: "),o.a.createElement("br",null),o.a.createElement("ul",null,d.map(function(e,t){return o.a.createElement("li",{key:t},e)})),o.a.createElement("br",null),o.a.createElement("code",null,"browser supported video types"),o.a.createElement("ul",null,x.map(function(e){var t=MediaRecorder.isTypeSupported(e);return o.a.createElement("li",{key:e},e," : ",t?"supported":"not supported")})),o.a.createElement("br",null),o.a.createElement(J,{videoRef:i,showPreview:n,streamDelay:Ee,isStreaming:Ae}),o.a.createElement("br",null),o.a.createElement("h3",null,"local state:"),JSON.stringify(fe,null,2),o.a.createElement("h3",null,"db state"),JSON.stringify(ue,null,2)):null,o.a.createElement(M,{videoRef:i,triggerRecording:T,duration:N,showPreview:n,onComplete:function(e,t){console.log(te,e),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,o=b()().format("YYYY-MM-DDTHH:mm:ss:SSS"),r=b()().format("YYYY-MM-DD");C.storage().ref("".concat("videos","/").concat(n,"-").concat(o).concat(t)).put(e).then(function(e){console.log(e),console.log(e.ref.location.path);var n=e.ref.location.path;C.firestore().collection("videoURL").doc(r).collection("urls").doc().set({url:n}).then(function(e){var r="pushVideoDataToStorage: COMPLETE video:".concat("videos","/").concat(o).concat(t,", ref: ").concat(n,", callback: ").concat(e);I(r,function(){return console.log(r)}),a&&a()})}).catch(function(e){var t="pushVideoDataToStorage: ERROR ".concat(JSON.stringify(e));I(t,function(){return console.log(t)})})}(e,t,te,function(){return Se(function(e){return!e})}),ge(function(e){return Object(m.a)({},e,{isRecording:!1})}),k(!1)}}),o.a.createElement(H,{videoRef:i,isDetecting:y,delay:1e3,onDetect:function(e){return A(e.bright)}}))},V=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("p",null,"v1.6"),o.a.createElement("br",null),o.a.createElement(q,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,1,2]]]);
//# sourceMappingURL=main.f0270525.chunk.js.map